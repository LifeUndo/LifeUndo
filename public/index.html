<!doctype html><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>LifeUndo — оплата</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;margin:0;background:#0b0f16;color:#e6edf3}
  .wrap{max-width:560px;margin:7vh auto;padding:24px}
  .card{background:#121826;border:1px solid #1f2937;border-radius:16px;padding:24px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
  h1{margin:0 0 8px;font-size:28px}
  p{margin:0 0 16px;color:#9aa4b2}
  label{display:block;margin:12px 0 6px}
  input{width:100%;padding:12px 14px;border-radius:12px;border:1px solid #1f2937;background:#0d1420;color:#e6edf3}
  button{margin-top:16px;width:100%;padding:14px 16px;border:0;border-radius:12px;background:#635bff;color:#fff;font-weight:600;cursor:pointer}
  button:disabled{opacity:.6;cursor:not-allowed}
  .note{margin-top:10px;font-size:12px;color:#7b8694}
  .err{margin-top:10px;color:#ff6b6b}
</style>
<div class="wrap">
  <div class="card">
    <h1>LifeUndo — VIP лицензия</h1>
    <p>Единовременный платеж · 2 490 ₽</p>
    <form id="pay">
      <label>E-mail для получения ключа</label>
      <input id="email" type="email" placeholder="you@example.com" required>
      <button id="go">Оплатить 2 490 ₽</button>
      <div class="note">Оплата через FreeKassa · тестовый режим можно включить в кабинете FK.</div>
      <div class="err" id="err" hidden></div>
    </form>
  </div>
</div>
<script>
const f=document.getElementById('pay'), btn=document.getElementById('go'), err=document.getElementById('err');
f.addEventListener('submit', async (e)=>{
  e.preventDefault(); err.hidden=true; btn.disabled=true; btn.textContent='Готовим оплату…';
  try{
    const email=document.getElementById('email').value.trim();
    const res=await fetch('/api/fk/create',{method:'POST',headers:{'Content-Type':'application/json'},
      body:JSON.stringify({email, plan:'vip_lifetime', locale:'ru'})});
    const j=await res.json();
    if(j.url) location.href=j.url; else throw new Error(j.error||'Не удалось получить ссылку');
  }catch(ex){ err.textContent=ex.message; err.hidden=false; btn.disabled=false; btn.textContent='Оплатить 2 490 ₽';}
});
</script>