# –û—Ç—á–µ—Ç –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –¢–ó –¥–ª—è Firefox —Ä–µ–ª–∏–∑–∞ 0.3.7.12

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### A. Firefox-–ø–∞–∫–µ—Ç (–æ—Ç–¥–µ–ª—å–Ω—ã–π –±–∏–ª–¥ –±–µ–∑ service_worker)

1. **‚úÖ –°–æ–∑–¥–∞–Ω `manifest.firefox.json`** –¥–ª—è Firefox MV2:
   - Manifest version 2
   - Browser-specific settings –¥–ª—è Gecko
   - Background scripts –≤–º–µ—Å—Ç–æ service worker
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ –∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

2. **‚úÖ –°–æ–∑–¥–∞–Ω `background-firefox.js`** –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è Firefox:
   - –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Firefox WebExtensions API
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `browser.*` –≤–º–µ—Å—Ç–æ `chrome.*`
   - –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ background.js

3. **‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–∫–∞–ª–µ–π `_locales/`**:
   - `_locales/en/messages.json` - –∞–Ω–≥–ª–∏–π—Å–∫–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
   - `_locales/ru/messages.json` - —Ä—É—Å—Å–∫–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è Firefox

4. **‚úÖ –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `closeLicenseModal`**:
   - –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤ `closeLicenseModalBtn`
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∏–º–µ–Ω –≤ `popup.js`

5. **‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å–±–æ—Ä–∫–∞ FF-–±–∏–ª–¥–∞**:
   - –ü–∞–ø–∫–∞ `dist-ff/` —Å Firefox-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
   - `manifest.firefox.json` ‚Üí `manifest.json`
   - `background-firefox.js` ‚Üí `background.js`

6. **‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã Mozilla**:
   - `devDependency: web-ext@^7.8.0`
   - NPM —Å–∫—Ä–∏–ø—Ç—ã: `ff:lint` –∏ `ff:build`
   - –£—Å–ø–µ—à–Ω–∞—è —Å–±–æ—Ä–∫–∞ XPI: `web-ext-artifacts/getlifeundo-0.3.7.12.zip`

### B. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ª–∏–∑–æ–≤

1. **‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ª–∏–∑–æ–≤ –≥–æ—Ç–æ–≤–∞**:
   ```
   public/app/0.3.7.11/ ...(—Ñ–∞–π–ª—ã, checksums.txt)
   public/app/0.3.7.12/ lifeundo-0.3.7.12.xpi, undo-setup-0.3.7.12.exe, undo-0.3.7.12.dmg, checksums.txt, RELEASE_NOTES.md
   public/app/latest/   *-latest.*, latest.json
   ```

2. **‚úÖ `latest.json` –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã**:
   - –í–µ—Ä—Å–∏—è: 0.3.7.12
   - –î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏: 2025-10-04T10:00:00Z
   - –°—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–∞–π–ª—ã –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º

3. **‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/downloads/archive`**:
   - –°–ø–∏—Å–æ–∫ –≤–µ—Ä—Å–∏–π –∏–∑ `public/app/*`
   - –°—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–∞–π–ª—ã –∏ checksums.txt
   - RU/EN –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

4. **‚úÖ PowerShell —Å–∫—Ä–∏–ø—Ç—ã –≥–æ—Ç–æ–≤—ã**:
   - `pack_firefox.ps1` - —É–ø–∞–∫–æ–≤–∫–∞ Firefox
   - `checksums.ps1` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è SHA256
   - `update_latest.ps1` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ latest.json

### C. –°–∞–π—Ç: –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

1. **‚úÖ `/downloads` —á–∏—Ç–∞–µ—Ç `latest.json`**:
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Å—ã–ª–æ–∫
   - –ü–æ–∫–∞–∑ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏
   - –°–∫—Ä—ã—Ç–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º

2. **‚úÖ –ö–Ω–æ–ø–∫–∞ Firefox –∞–∫—Ç–∏–≤–Ω–∞** –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `files.firefox` –≤ `latest.json`

3. **‚úÖ –ù–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–Ω–æ** –≤ –æ–ø–ª–∞—Ç–µ, –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, —Ñ—É—Ç–µ—Ä–µ, i18n

### D. CI/Guardrails

1. **‚úÖ Pre-release –ø—Ä–æ–≤–µ—Ä–∫–∞**:
   - –°–∫—Ä–∏–ø—Ç `scripts/release/pre_release_check.ps1`
   - NPM –∫–æ–º–∞–Ω–¥–∞: `npm run pre-release`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ Firefox —Å–±–æ—Ä–∫–∏, web-ext lint, —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ä–µ–ª–∏–∑–æ–≤

2. **‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã**:
   - `npm run ff:lint` - 0 –æ—à–∏–±–æ–∫, 3 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ)
   - `npm run ff:build` - —É—Å–ø–µ—à–Ω–∞—è —Å–±–æ—Ä–∫–∞ XPI
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ª–∏–∑–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

## üéØ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–µ–ª–∏–∑—É

### ‚úÖ READY FOR RELEASE!

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã:**
- Firefox —Å–±–æ—Ä–∫–∞ –≥–æ—Ç–æ–≤–∞
- web-ext lint –ø—Ä–æ—à–µ–ª
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ª–∏–∑–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- latest.json –≤–∞–ª–∏–¥–µ–Ω

**–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ):**
- Dev —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω (–Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è production)
- FreeKassa –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã (–Ω–æ—Ä–º–∞–ª—å–Ω–æ –±–µ–∑ dev —Å–µ—Ä–≤–µ—Ä–∞)

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è PM

### 1. AMO Submission
- –ó–∞–≥—Ä—É–∑–∏—Ç—å XPI –∏–∑ `web-ext-artifacts/getlifeundo-0.3.7.12.zip`
- –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ª–∏—Å—Ç–∏–Ω–≥ —Å–æ–≥–ª–∞—Å–Ω–æ `store/amo/LISTING_TEXTS.md`
- Submit ‚Üí In Review ‚Üí Approved

### 2. –ü–æ—Å–ª–µ –∞–ø–ø—Ä—É–≤–∞
- –û–±–Ω–æ–≤–∏—Ç—å `public/app/latest/latest.json` —Å AMO URL
- –ó–∞–ª–∏—Ç—å –Ω–∞ CDN –∏–ª–∏ –¥–µ–ø–ª–æ–π —Å–∞–π—Ç–∞
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `/downloads` - –∫–Ω–æ–ø–∫–∞ Firefox –¥–æ–ª–∂–Ω–∞ —Å—Ç–∞—Ç—å –∞–∫—Ç–∏–≤–Ω–æ–π

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- `npm run pre-release` –∫–∞–∂–¥—ã–µ 2-3 —á–∞—Å–∞
- FreeKassa –ª–æ–≥–∏: —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ `create ‚Üí callback OK`
- –û—à–∏–±–∫–∏ 5xx ‚Üí –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π Revert

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

**Firefox —Å–±–æ—Ä–∫–∞:**
- –†–∞–∑–º–µ—Ä XPI: ~28KB (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω)
- Manifest version: 2
- Background: scripts (–Ω–µ service worker)
- –õ–æ–∫–∞–ª–∏: `_locales/en/` –∏ `_locales/ru/`

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- web-ext lint: ‚úÖ 0 –æ—à–∏–±–æ–∫
- AMO —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: ‚úÖ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤: ‚úÖ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

**–û—Ç–∫–∞—Ç:**
- Revert –≤ Vercel –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã
- –ù–∏–∫–∞–∫–∏—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

---

**–°—Ç–∞—Ç—É—Å: –ì–û–¢–û–í –ö –ü–†–û–î–ê–ö–®–ï–ù–£** üöÄ
