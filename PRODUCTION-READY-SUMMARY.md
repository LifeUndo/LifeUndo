# üöÄ –°–≤–æ–¥–∫–∞: –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

## ‚úÖ –ß—Ç–æ –≥–æ—Ç–æ–≤–æ

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å
- **API Endpoints:** `/api/fk/create`, `/api/fk/notify`, `/api/admin/orders`
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** Timing-safe —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–µ–π, –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤
- **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å:** –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—É–º–º, CORS –∫–µ—à
- **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ JSON –∏ x-www-form-urlencoded

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Smoke Test:** `smoke-test-freekassa.ps1`
- **–≠–º—É–ª—è—Ç–æ—Ä Notify:** `fk-notify-sim.ps1`
- **–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã:** `negative-tests.sh`
- **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:** `test-admin.ps1`
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** `production-readiness-check.ps1`

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **Runbook:** `RUNBOOK.md` - —Ä–µ—à–µ–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º
- **–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç:** `OPERATIONAL-CHECKLIST.md`
- **–ü–ª–∞–Ω –¥–µ–Ω—å-0/–¥–µ–Ω—å-1:** `DAY-0-DAY-1-PLAN.md`
- **–¢–∞–±–ª–∏—Ü–∞ —Å–≤–µ—Ä–∫–∏:** `VERIFICATION-TABLE.md`

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ
- [x] –í—Å–µ API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
- [x] –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- [x] –¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞
- [x] Rollback-–ø–ª–∞–Ω –≥–æ—Ç–æ–≤
- [x] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

### ‚è≥ –û–∂–∏–¥–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- [ ] –†–æ—Ç–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –∫–∞–±–∏–Ω–µ—Ç–µ FK
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ ENV –≤ Vercel
- [ ] Redeploy Production
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Notify URL
- [ ] –ñ–∏–≤–∞—è –æ–ø–ª–∞—Ç–∞ –Ω–∞ iPhone

## üöÄ –ü–ª–∞–Ω –∑–∞–ø—É—Å–∫–∞

### –î–µ–Ω—å-0 (–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞)
1. **–†–æ—Ç–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤** –≤ –∫–∞–±–∏–Ω–µ—Ç–µ FreeKassa
2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ ENV** –≤ Vercel
3. **Redeploy Production**
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
5. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**

### –î–µ–Ω—å-1 (–ø–µ—Ä–≤—ã–µ –ø–ª–∞—Ç–µ–∂–∏)
1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Notify URL** –≤ –∫–∞–±–∏–Ω–µ—Ç–µ FK
2. **–¢–µ—Å—Ç "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å"** ‚Üí 200
3. **–ñ–∏–≤–∞—è –æ–ø–ª–∞—Ç–∞** –Ω–∞ iPhone
4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤** Vercel
5. **–¢–µ—Å—Ç –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏**

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ê–ª–µ—Ä—Ç—ã
- **–£—Å–ø–µ—à–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏:** `[FK][notify] OK` < 5 –≤ —á–∞—Å
- **–û—à–∏–±–∫–∏:** 4xx/5xx –Ω–∞ `/api/fk/notify` > 3 –≤ 10 –º–∏–Ω

### –õ–æ–≥–∏
- **–§–∏–ª—å—Ç—Ä:** –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É `FK`
- **–ö–ª—é—á–µ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è:** `[FK][create]`, `[FK][notify] OK`
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –Ω–∏–∫–∞–∫–∏—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –ª–æ–≥–∞—Ö

## üîß –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

### –ü–æ–∏—Å–∫ –∑–∞–∫–∞–∑–æ–≤
```bash
GET /api/admin/orders?order_id=LU-123
Authorization: Bearer <ADMIN_TOKEN>
```

### –ü–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–ª—é—á–µ–π
```bash
POST /api/admin/orders
{"order_id": "LU-123", "action": "resend_license"}
```

## üö® Rollback-–ø–ª–∞–Ω

### Bad signature
1. –°–≤–µ—Ä–∏—Ç—å —Å—Ö–µ–º—É –ø–æ–¥–ø–∏—Å–∏ –≤ –∫–∞–±–∏–Ω–µ—Ç–µ FK
2. –ü–æ–ø—Ä–∞–≤–∏—Ç—å `buildCreateSignature`/`buildNotifySignature`
3. Redeploy Production

### 405 –Ω–∞ notify
1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å Notify URL –Ω–∞ Vercel-–¥–æ–º–µ–Ω
2. –ü–æ–≤—Ç–æ—Ä–Ω–æ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å"

### –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å KV-—Ñ–ª–∞–≥ `paid:true`
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–¥–º–∏–Ω-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∫–∏

## üéâ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

**‚úÖ –í–°–ï –°–ò–°–¢–ï–ú–´ –ì–û–¢–û–í–´:**
- –ë–æ–µ–≤–∞—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –≤–∫–ª—é—á–µ–Ω–∞
- –¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- Rollback-–ø–ª–∞–Ω –≥–æ—Ç–æ–≤

**üöÄ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–ª–∞–Ω "–î–µ–Ω—å-0" –∏ –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø–µ—Ä–≤—ã–µ —Ä–µ–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏!

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

- **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞:** developer@lifeundo.ru
- **FreeKassa –ø–æ–¥–¥–µ—Ä–∂–∫–∞:** —á–µ—Ä–µ–∑ –∫–∞–±–∏–Ω–µ—Ç FK
- **Vercel –ø–æ–¥–¥–µ—Ä–∂–∫–∞:** —á–µ—Ä–µ–∑ dashboard

## üîÑ –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

- **–ï–∂–µ–¥–Ω–µ–≤–Ω–æ:** –õ–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–ª–∞—Ç–µ–∂–µ–π
- **–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ:** –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å IP-—Å–ø–∏—Å–∫–∞, –æ—á–∏—Å—Ç–∫–∞ KV
- **–ï–∂–µ–º–µ—Å—è—á–Ω–æ:** –†–æ—Ç–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
