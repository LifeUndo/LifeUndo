# üöÄ Deploy 0.4.2 - –ß–µ–∫-–ª–∏—Å—Ç

## **üìã –ß–¢–û –°–î–ï–õ–ê–¢–¨ –ü–†–Ø–ú–û –°–ï–ô–ß–ê–°:**

### **1. ENV –Ω–∞ Beget (SMTP):**
```
NEXT_PUBLIC_APP_VERSION=0.4.2
SMTP_HOST=...
SMTP_PORT=465
SMTP_USER=...
SMTP_PASS=...
MAIL_FROM="LifeUndo <support@lifeundo.ru>"
```

> –ï—Å–ª–∏ 465 –∑–∞–∫—Ä—ã—Ç ‚Äî –ø–æ—Å—Ç–∞–≤—å `SMTP_PORT=587`, –æ–Ω–æ —Ç–æ–∂–µ –æ–∫.

### **2. –°–±–æ—Ä–∫–∞/–∑–∞–ø—É—Å–∫:**
```bash
npm run build
npm start
```

### **3. –°–∏–¥–∏–Ω–≥ "–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é" (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –ø—É—Å—Ç–æ):**
```sql
-- –±–∞–Ω–Ω–µ—Ä (–¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω)
WITH t AS (SELECT id FROM tenants WHERE slug='lifeundo')
INSERT INTO status_banners (tenant_id,active,title,message)
SELECT t.id,false,'‚Äî','‚Äî' FROM t
ON CONFLICT DO NOTHING;

-- email —à–∞–±–ª–æ–Ω test
WITH t AS (SELECT id FROM tenants WHERE slug='lifeundo')
INSERT INTO email_templates (tenant_id,"key",subject,body_md)
SELECT t.id,'payment_succeeded','–û–ø–ª–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∞','**–°–ø–∞—Å–∏–±–æ, {{customer}}!** –ü–ª–∞—Ç—ë–∂ –ø—Ä–∏–Ω—è—Ç.' FROM t
ON CONFLICT DO NOTHING;
```

## **üß™ –ë–´–°–¢–†–´–ô –°–ú–û–£–ö 0.4.2 (2 –º–∏–Ω—É—Ç—ã):**

### **1. /partners:**
- ‚úÖ –í–∏–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ —Ç–∞—Ä–∏—Ñ–æ–≤
- ‚úÖ –°—É–º–º—ã/–≤–∞–ª—é—Ç–∞ –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è

### **2. /api/public/pricing:**
- ‚úÖ –û—Ç–¥–∞–µ—Ç JSON —Å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º–∏ –ø–ª–∞–Ω–∞–º–∏ (tenant-aware)

### **3. /admin/status:**
- ‚úÖ –í–∫–ª—é—á–∏ –±–∞–Ω–Ω–µ—Ä ‚Üí –æ–Ω –ø–æ—è–≤–∏–ª—Å—è –Ω–∞ **/status**

### **4. /admin/emails:**
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏ —à–∞–±–ª–æ–Ω –∏ –Ω–∞–∂–º–∏ ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç¬ª (–ø–∏—Å—å–º–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç)

## **üîß cURL –¥–ª—è –ø–∏—Å–µ–º (–µ—Å–ª–∏ —É–¥–æ–±–Ω–µ–µ —Ä—É–∫–∞–º–∏):**

```bash
# upsert —à–∞–±–ª–æ–Ω–∞
curl -s -X POST https://getlifeundo.com/api/admin/email-templates \
  -u admin:****** -H "Content-Type: application/json" \
  -d '{"key":"payment_succeeded","subject":"–û–ø–ª–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∞","bodyMd":"**–°–ø–∞—Å–∏–±–æ, {{customer}}!** –ü–ª–∞—Ç—ë–∂ –ø—Ä–∏–Ω—è—Ç."}'

# —Ç–µ—Å—Ç-–æ—Ç–ø—Ä–∞–≤–∫–∞
curl -s -X POST https://getlifeundo.com/api/admin/email-templates/test \
  -u admin:****** -H "Content-Type: application/json" \
  -d '{"key":"payment_succeeded","to":"you@example.com","vars":{"customer":"–ò–≤–∞–Ω"}}'
```

## **üõ°Ô∏è –ö–û–ù–¢–†–û–õ–¨ –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò (–±—ã—Å—Ç—Ä–æ):**

### **1. /api/public/pricing:**
- ‚úÖ –ü—É–±–ª–∏—á–Ω—ã–π, –Ω–æ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–µ–∫—Ä–µ—Ç–æ–≤ (—Ç–æ–ª—å–∫–æ –ø–ª–∞–Ω—ã/—Ü–µ–Ω—ã). –û–∫.

### **2. /admin/:**
- ‚úÖ –ü–æ-–ø—Ä–µ–∂–Ω–µ–º—É –∑–∞–∫—Ä—ã—Ç BasicAuth (+ IP whitelist)

### **3. SMTP:**
- ‚úÖ –•—Ä–∞–Ω–∏–º —Ç–æ–ª—å–∫–æ –≤ ENV (–Ω–µ –≤ —Ä–µ–ø–æ). –ü—Ä–∞–≤–∞ ‚Äî read-only –≤–ª–∞–¥–µ–ª—å—Ü—É –ø—Ä–æ—Ü–µ—Å—Å–∞

## **üì¶ –ü–£–ë–õ–ò–ö–ê–¶–ò–Ø SDK (–∫–æ–≥–¥–∞ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤):**

### **1. JS (npm):**
```bash
cd packages/lifeundo-js
npm login
npm publish --access public
```

### **2. Python (PyPI):**
```bash
cd packages/lifeundo-python
python -m build
twine upload dist/*
```

–ü–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ ‚Äî –¥–æ–±–∞–≤–∏–º —Ä–µ–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ `/developers`.

## **üö® –ï–°–õ–ò –ß–¢–û-–¢–û ¬´–ù–ï –õ–ï–¢–ò–¢¬ª:**

### **1. –ü–∏—Å—å–º–∞ –Ω–µ —É—Ö–æ–¥—è—Ç:**
- –ü—Ä–æ–≤–µ—Ä—å `SMTP_*` –∏ –ø–æ—Ä—Ç (465‚Üî587), –∞ —Ç–∞–∫–∂–µ `MAIL_FROM`

### **2. –ë–∞–Ω–Ω–µ—Ä –Ω–µ –≤–∏–¥–µ–Ω:**
- –û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É `/status` –±–µ–∑ –∫—ç—à–∞ `?cb=$(date +%s)`

### **3. –¶–µ–Ω—ã –Ω–µ –º–µ–Ω—è—é—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å, –µ—Å—Ç—å –ª–∏ –∑–∞–ø–∏—Å–∏ –≤ `tenant_plans` (–µ—Å–ª–∏ –Ω–µ—Ç ‚Äî –±–µ—Ä—ë—Ç—Å—è `plans`)

## **‚úÖ –ö–†–ò–¢–ï–†–ò–ò –ì–û–¢–û–í–ù–û–°–¢–ò:**

- [ ] ENV –æ–±–Ω–æ–≤–ª–µ–Ω (–≤–µ—Ä—Å–∏—è + SMTP)
- [ ] Build —É—Å–ø–µ—à–µ–Ω
- [ ] /partners –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É —Ç–∞—Ä–∏—Ñ–æ–≤
- [ ] /api/public/pricing –æ—Ç–¥–∞–µ—Ç JSON
- [ ] /admin/status —É–ø—Ä–∞–≤–ª—è–µ—Ç –±–∞–Ω–Ω–µ—Ä–∞–º–∏
- [ ] /admin/emails —É–ø—Ä–∞–≤–ª—è–µ—Ç —à–∞–±–ª–æ–Ω–∞–º–∏
- [ ] –¢–µ—Å—Ç-–ø–∏—Å—å–º–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç
- [ ] –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞

## **üéØ –ì–û–¢–û–í–û –ö –ü–†–û–î–ê–ö–®–ï–ù–£:**

–ü–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤—Å–µ—Ö –ø—É–Ω–∫—Ç–æ–≤:
- ‚úÖ 0.4.2 ‚Äî –∑–µ–ª—ë–Ω—ã–π —Ä–µ–ª–∏–∑
- ‚úÖ Per-tenant pricing —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Admin UI —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω
- ‚úÖ Email —à–∞–±–ª–æ–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞

**GetLifeUndo 0.4.2 –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É! üöÄ**

