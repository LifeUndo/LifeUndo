# Release 0.4.0 ‚Äî AutoPack

**–î–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞:** 2025-01-30  
**–ö–æ–¥–æ–≤–æ–µ –∏–º—è:** AutoPack  
**–¶–µ–ª—å:** –ü–æ–ª–Ω—ã–π –ø–æ—Å—Ç-–æ–ø–ª–∞—Ç–Ω—ã–π –∫–æ–Ω—Ç—É—Ä —Å FreeKassa, –ë–î, email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π

---

## üéØ –ß—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ —Ä–µ–ª–∏–∑

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL + Drizzle ORM)

**–¢–∞–±–ª–∏—Ü—ã:**
- `payments` ‚Äî –∏—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π —Å –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é
- `licenses` ‚Äî –∞–∫—Ç–∏–≤–Ω—ã–µ –ª–∏—Ü–µ–Ω–∑–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Pro/VIP/Team)
- `feature_flags` ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `starter_bonus`)
- `support_tickets` ‚Äî –æ–±—Ä–∞—â–µ–Ω–∏—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É

**–ú–∏–≥—Ä–∞—Ü–∏—è:** `migrations/100_payments_licenses.sql`

**–ò–Ω–¥–µ–∫—Å—ã:**
- `payments.order_id` (UNIQUE)
- `licenses.user_email`
- `feature_flags.user_email`

---

### 2. API Endpoints

#### 2.1 –ü–ª–∞—Ç–µ–∂–∏

**`POST /api/payments/freekassa/create`**
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ —á–µ—Ä–µ–∑ FreeKassa
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è `order_id` —Å –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏ (`S6M`, `PROM`, `VIPL`, `TEAM5`)
- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∏ –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ pay.freekassa.com

**`POST /api/payments/freekassa/result`** (Webhook)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ FreeKassa (SECRET2)
- ‚úÖ **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –≤—ã–∑–æ–≤—ã –Ω–µ –º–µ–Ω—è—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `payments` (status='paid')
- ‚úÖ –ê–∫—Ç–∏–≤–∞—Ü–∏—è/–ø—Ä–æ–¥–ª–µ–Ω–∏–µ –ª–∏—Ü–µ–Ω–∑–∏–∏
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `YES` –¥–ª—è FreeKassa

**`GET /api/payment/summary?order_id=...`**
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–ª–∞—Ç–µ–∂–µ
- –î–∞–Ω–Ω—ã–µ: plan, amount, currency, status, license, flags

#### 2.2 –ê–∫–∫–∞—É–Ω—Ç

**`POST /api/account/resend-license`**
- –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ email —Å –∞–∫—Ç–∏–≤–∞—Ü–∏–µ–π –ª–∏—Ü–µ–Ω–∑–∏–∏
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `order_id` –∏–ª–∏ `email`

#### 2.3 –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**`POST /api/support/ticket`**
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –≤ –ë–î (`support_tickets`)
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ `support@lifeundo.ru`

---

### 3. Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (SMTP + Nodemailer)

**–®–∞–±–ª–æ–Ω:** `src/lib/email/templates/license-activated.ts`

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∏—Å—å–º–∞:**
- üéâ –ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –∞–∫—Ç–∏–≤–∞—Ü–∏–µ–π
- Order ID, –ø–ª–∞–Ω, —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
- –ë–æ–Ω—É—Å—ã (–¥–ª—è `starter_6m`: `starter_bonus`)
- –°—Å—ã–ª–∫–∏: Features, Support, Download
- –ö–æ–Ω—Ç–∞–∫—Ç—ã: Telegram, email

**SMTP ENV:**
```env
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASS=********
SMTP_FROM="GetLifeUndo <noreply@lifeundo.ru>"
```

---

### 4. –¢–∞—Ä–∏—Ñ—ã (FreeKassa Plans)

| Plan ID       | –ù–∞–∑–≤–∞–Ω–∏–µ              | –¶–µ–Ω–∞    | –°—Ä–æ–∫   | Level | –ë–æ–Ω—É—Å           |
|---------------|-----------------------|---------|--------|-------|-----------------|
| `starter_6m`  | Starter Bundle        | 3000 ‚ÇΩ  | 180 –¥–Ω | Pro   | starter_bonus   |
| `pro_month`   | Pro / –º–µ—Å—è—Ü           | 599 ‚ÇΩ   | 30 –¥–Ω  | Pro   | ‚Äî               |
| `vip_lifetime`| VIP –Ω–∞–≤—Å–µ–≥–¥–∞          | 9990 ‚ÇΩ  | ‚àû      | VIP   | ‚Äî               |
| `team_5`      | Team (5 –º–µ—Å—Ç)         | 2990 ‚ÇΩ  | 30 –¥–Ω  | Team  | ‚Äî               |

**–ü—Ä–µ—Ñ–∏–∫—Å—ã Order ID:**
- `S6M-*` ‚Äî Starter Bundle
- `PROM-*` ‚Äî Pro Month
- `VIPL-*` ‚Äî VIP Lifetime
- `TEAM5-*` ‚Äî Team 5

---

### 5. –í–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã

#### `/ru/success` (–æ–±–Ω–æ–≤–ª–µ–Ω–∞)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –∑–∞–∫–∞–∑–∞ (order_id, plan, expires_at)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–∏—Ü–µ–Ω–∑–∏–∏ (—É—Ä–æ–≤–µ–Ω—å, —Å—Ä–æ–∫, –±–æ–Ω—É—Å—ã)
- –ë–∞–Ω–Ω–µ—Ä —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞ (–µ—Å–ª–∏ `NEXT_PUBLIC_IS_TEST_MODE=true`)
- CTA: Features, Support, Account
- –°—Å—ã–ª–∫–∏ –Ω–∞ Telegram-–ø–æ–¥–¥–µ—Ä–∂–∫—É

#### `/ru/account`
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ –ª–∏—Ü–µ–Ω–∑–∏–∏ (email, level, expires_at)
- –°–ø–∏—Å–æ–∫ –±–æ–Ω—É—Å–Ω—ã—Ö —Ñ–ª–∞–≥–æ–≤
- **–ö–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ"** ‚Üí `/api/account/resend-license`
- –ü—Ä–∏–≤—è–∑–∫–∞ –ø–æ–∫—É–ø–∫–∏ –ø–æ `order_id`

---

### 6. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (Plausible)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `src/components/Analytics.tsx`

**–°–æ–±—ã—Ç–∏—è:**
- `pricing_click_pay` ‚Äî –∫–ª–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫—É –æ–ø–ª–∞—Ç—ã (+ –ø–ª–∞–Ω)
- `starter_click` ‚Äî –∫–ª–∏–∫ –Ω–∞ Starter Bundle
- `purchase_redirect_fk` ‚Äî —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ FreeKassa (+ –ø–ª–∞–Ω, order_id)
- `purchase_success` ‚Äî —É—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞ (+ –ø–ª–∞–Ω, order_id, —Å—É–º–º–∞)
- `support_opened` ‚Äî –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (+ order_id, –ø–ª–∞–Ω)

**ENV:**
```env
NEXT_PUBLIC_ANALYTICS_ENABLED=true
NEXT_PUBLIC_PLAUSIBLE_DOMAIN=getlifeundo.com
```

---

## üîß –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

### –°–µ—Ä–≤–µ—Ä–Ω—ã–µ (Vercel Secrets)

```bash
# Database
DATABASE_URL=postgres://user:pass@host:5432/dbname

# SMTP
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASS=********
SMTP_FROM="GetLifeUndo <noreply@lifeundo.ru>"

# FreeKassa
FREEKASSA_MERCHANT_ID=******
FREEKASSA_SECRET1=******
FREEKASSA_SECRET2=******
FREEKASSA_PAYMENT_URL=https://pay.freekassa.com/
FREEKASSA_CURRENCY=RUB
```

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ (Vercel Environment Variables)

```bash
# –ü–ª–∞—Ç–µ–∂–∏
NEXT_PUBLIC_FK_ENABLED=true

# –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (Preview)
NEXT_PUBLIC_IS_TEST_MODE=false

# –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
NEXT_PUBLIC_ANALYTICS_ENABLED=true
NEXT_PUBLIC_PLAUSIBLE_DOMAIN=getlifeundo.com
```

---

## üì¶ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

**–§–∞–π–ª:** `migrations/100_payments_licenses.sql`

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
```bash
# –õ–æ–∫–∞–ª—å–Ω–æ (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ë–î)
psql $DATABASE_URL -f migrations/100_payments_licenses.sql

# –ß–µ—Ä–µ–∑ Vercel Postgres
# –∏–ª–∏ Neon Console (SQL Editor)
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```sql
SELECT table_name FROM information_schema.tables 
WHERE table_schema = 'public' 
AND table_name IN ('payments', 'licenses', 'feature_flags', 'support_tickets');
```

---

## ‚úÖ Smoke Tests (–±–æ–µ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
curl https://getlifeundo.com/api/debug/fk
# –û–∂–∏–¥–∞–µ—Ç—Å—è: { "configured": true, "merchant_id": "****", ... }
```

### 2. –¢–µ—Å—Ç–æ–≤—ã–π –ø–ª–∞—Ç—ë–∂ (Starter Bundle)

1. –û—Ç–∫—Ä—ã—Ç—å `/ru/pricing`
2. –ö–ª–∏–∫–Ω—É—Ç—å "Starter Bundle" ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ FreeKassa
3. –û–ø–ª–∞—Ç–∏—Ç—å **–º–∏–Ω–∏–º–∞–ª—å–Ω—É—é —Å—É–º–º—É** (–∏–ª–∏ —Ç–µ—Å—Ç–æ–≤—É—é –∫–∞—Ä—Ç—É)
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
   - ‚úÖ –ó–∞–ø–∏—Å—å –≤ `payments` (status='paid')
   - ‚úÖ –ó–∞–ø–∏—Å—å –≤ `licenses` (level='pro', expires_at=+180 –¥–Ω–µ–π)
   - ‚úÖ –ó–∞–ø–∏—Å—å –≤ `feature_flags` (key='starter_bonus')
   - ‚úÖ Email –ø–æ–ª—É—á–µ–Ω
5. –û—Ç–∫—Ä—ã—Ç—å `/ru/account?order_id=S6M-...`
   - –î–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ª–∏—Ü–µ–Ω–∑–∏—è –∏ –±–æ–Ω—É—Å

### 3. –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –≤–µ–±—Ö—É–∫–∞

–û—Ç–ø—Ä–∞–≤–∏—Ç—å **–ø–æ–≤—Ç–æ—Ä–Ω—ã–π** POST –Ω–∞ `/api/payments/freekassa/result` —Å —Ç–µ–º–∏ –∂–µ –¥–∞–Ω–Ω—ã–º–∏:
- ‚úÖ –û—Ç–≤–µ—Ç `YES`
- ‚úÖ –ë–î –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å
- ‚úÖ Email **–Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–≤—Ç–æ—Ä–Ω–æ**

### 4. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

–û—Ç–∫—Ä—ã—Ç—å [Plausible Dashboard](https://plausible.io/getlifeundo.com):
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–±—ã—Ç–∏—è: `pricing_click_pay`, `purchase_redirect_fk`, `purchase_success`

---

## üöÄ Production Flip (–ø–æ—à–∞–≥–æ–≤—ã–π —Ä–∞–Ω–±—É–∫)

### –®–∞–≥ 1: Preview –∑–µ–ª—ë–Ω—ã–π

```bash
vercel --prod=false
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å smoke tests –Ω–∞ preview
```

### –®–∞–≥ 2: Promote –≤ Production

```bash
vercel promote <deployment-url> --prod
```

### –®–∞–≥ 3: –ó–∞—â–∏—Ç–∞ Production

–í Vercel Dashboard ‚Üí Settings ‚Üí Deployment Protection:
- ‚úÖ Require approval for production deployments

### –®–∞–≥ 4: ENV –≤ Production

```bash
vercel env add NEXT_PUBLIC_FK_ENABLED production
> true

vercel env add NEXT_PUBLIC_ANALYTICS_ENABLED production
> true

vercel env add NEXT_PUBLIC_IS_TEST_MODE production
> false
```

### –®–∞–≥ 5: Smoke –≤ Production

1. –û—Ç–∫—Ä—ã—Ç—å `https://getlifeundo.com/api/debug/fk`
2. –°–æ–∑–¥–∞—Ç—å **—Ä–µ–∞–ª—å–Ω—ã–π** –ø–ª–∞—Ç—ë–∂ –Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é —Å—É–º–º—É
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î:
   ```sql
   SELECT * FROM payments WHERE order_id LIKE 'S6M-%' ORDER BY created_at DESC LIMIT 1;
   ```
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å email
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `/ru/account?order_id=...`

### –®–∞–≥ 6: –û—Ç–∫–ª—é—á–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º FreeKassa

–í –∫–∞–±–∏–Ω–µ—Ç–µ FreeKassa ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí **–í—ã–∫–ª—é—á–∏—Ç—å** "–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º"

### –®–∞–≥ 7: –ü—É–±–ª–∏—á–Ω—ã–π –∑–∞–ø—É—Å–∫

1. –ü–æ—Å—Ç –≤ Telegram [@GetLifeUndo](https://t.me/GetLifeUndo)
2. –ó–∞–ø—É—Å–∫ —Ä–µ–∫–ª–∞–º—ã (–µ—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

---

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –≤–µ–±—Ö—É–∫–∞

```typescript
// src/app/api/payments/freekassa/result/route.ts

const existing = await db.query.payments.findFirst({
  where: eq(payments.order_id, orderId)
});

if (existing && existing.status === 'paid') {
  console.log('[webhook] Already processed:', orderId);
  return new Response('YES', { status: 200 });
}

// –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç—Ç–æ –ø–µ—Ä–≤—ã–π —É—Å–ø–µ—à–Ω—ã–π –≤—ã–∑–æ–≤
```

### –ü—Ä–æ–¥–ª–µ–Ω–∏–µ –ª–∏—Ü–µ–Ω–∑–∏–∏ (max(now, current_expires))

```typescript
// src/lib/payments/license.ts

const now = new Date();
const baseDate = currentExpiresAt && currentExpiresAt > now 
  ? currentExpiresAt  // –ü—Ä–æ–¥–ª–µ–≤–∞–µ–º –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Å—Ä–æ–∫–∞
  : now;              // –ò–ª–∏ –æ—Ç —Å–µ–≥–æ–¥–Ω—è, –µ—Å–ª–∏ –∏—Å—Ç—ë–∫

const newExpiresAt = new Date(
  baseDate.getTime() + planConfig.periodDays * 24 * 60 * 60 * 1000
);
```

### Email —à–∞–±–ª–æ–Ω

- HTML —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏ –∏ –∫–Ω–æ–ø–∫–∞–º–∏
- –í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–∏—Ü–µ–Ω–∑–∏–∏ (–ø–ª–∞–Ω, —Å—Ä–æ–∫, –±–æ–Ω—É—Å)
- –°—Å—ã–ª–∫–∏ —Å prefill (`?order_id=...&email=...`)

---

## üìö –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ/–¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

```
src/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payments/freekassa/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ create/route.ts       ‚úÖ
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ result/route.ts       ‚úÖ (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, email)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment/summary/route.ts  ‚úÖ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ support/ticket/route.ts   ‚úÖ (–ë–î + email)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ account/resend-license/route.ts  üÜï
‚îÇ   ‚îî‚îÄ‚îÄ [locale]/
‚îÇ       ‚îú‚îÄ‚îÄ success/page.tsx          ‚úÖ (–æ–±–æ–≥–∞—â–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏)
‚îÇ       ‚îî‚îÄ‚îÄ account/page.tsx          ‚úÖ (–∫–Ω–æ–ø–∫–∞ resend)
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ Analytics.tsx                 üÜï
‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îú‚îÄ‚îÄ client.ts                     ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ schema.ts                     ‚úÖ
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ email/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ client.ts                 ‚úÖ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ templates/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ license-activated.ts  ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ payments/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fk-plans.ts               ‚úÖ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ license.ts                ‚úÖ (–∞–∫—Ç–∏–≤–∞—Ü–∏—è + email)
‚îÇ   ‚îî‚îÄ‚îÄ fk-env.ts                     ‚úÖ

migrations/
‚îî‚îÄ‚îÄ 100_payments_licenses.sql         ‚úÖ

docs/
‚îî‚îÄ‚îÄ release/
    ‚îî‚îÄ‚îÄ 0.4.0.md                      üÜï (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
```

---

## ‚úÖ Acceptance Criteria (–ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π –ª–∏—Å—Ç)

- [x] –í–µ–±-—Ö—É–∫ FreeKassa –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å—å
- [x] –í–µ–±-—Ö—É–∫ **–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–µ–Ω** (–ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤ –Ω–µ –º–µ–Ω—è–µ—Ç –ë–î)
- [x] `starter_6m` –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç Pro –Ω–∞ **180 –¥–Ω–µ–π**
- [x] –§–ª–∞–≥ `starter_bonus` —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å —Ç–µ–º –∂–µ —Å—Ä–æ–∫–æ–º
- [x] –ü–∏—Å—å–º–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã
- [x] `/ru/account` –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å, —Å—Ä–æ–∫, –±–æ–Ω—É—Å—ã
- [x] –ö–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ" —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏—è (Plausible)
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [x] Smoke-—Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
- [x] Production flip –≤—ã–ø–æ–ª–Ω–µ–Ω

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **Telegram –∫–∞–Ω–∞–ª:** [@GetLifeUndo](https://t.me/GetLifeUndo)
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** [@GetLifeUndoSupport](https://t.me/GetLifeUndoSupport)
- **FreeKassa –∫–∞–±–∏–Ω–µ—Ç:** [partner.freekassa.com](https://partner.freekassa.com)
- **Plausible:** [plausible.io/getlifeundo.com](https://plausible.io/getlifeundo.com)
- **Vercel Dashboard:** [vercel.com/lifeundo](https://vercel.com)

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏

- **Email:** support@lifeundo.ru
- **Telegram:** [@GetLifeUndoSupport](https://t.me/GetLifeUndoSupport)

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0  
**–ê–≤—Ç–æ—Ä:** GetLifeUndo Team  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

