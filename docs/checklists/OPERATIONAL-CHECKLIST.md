# üöÄ –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç: –ó–∞–ø—É—Å–∫ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

## üìã –ñ—ë—Å—Ç–∫–∏–π –ø–æ—Ä—è–¥–æ–∫ –∑–∞–ø—É—Å–∫–∞ (5 —à–∞–≥–æ–≤)

### 1. üîê FreeKassa: –†–æ—Ç–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤
- [ ] –í –∫–∞–±–∏–Ω–µ—Ç–µ FK —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å `SECRET1`
- [ ] –í –∫–∞–±–∏–Ω–µ—Ç–µ FK —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å `SECRET2`
- [ ] –í –∫–∞–±–∏–Ω–µ—Ç–µ FK —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å `API_KEY`
- [ ] –ó–∞–ø–∏—Å–∞—Ç—å –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- [ ] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–Ω–∞–ø—à–æ—Ç ENV –ª–æ–∫–∞–ª—å–Ω–æ

### 2. ‚öôÔ∏è Vercel: Environment Variables
- [ ] Project ‚Üí Settings ‚Üí Environment Variables
- [ ] `FK_MERCHANT_ID=<–Ω–æ–≤—ã–π>`
- [ ] `FK_SECRET1=<–Ω–æ–≤—ã–π>`
- [ ] `FK_SECRET2=<–Ω–æ–≤—ã–π>`
- [ ] `ALLOWED_ORIGIN=https://lifeundo.ru`
- [ ] `CURRENCY=RUB`
- [ ] `ADMIN_TOKEN=<—Å–ª—É—á–∞–π–Ω—ã–π-—Ç–æ–∫–µ–Ω>` (–¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏)
- [ ] **Redeploy Production**

### 3. üîó FreeKassa: Notify URL
- [ ] **Notify (POST):** `https://<project>.vercel.app/api/fk/notify`
- [ ] **Success URL:** `https://lifeundo.ru/success.html`
- [ ] **Fail URL:** `https://lifeundo.ru/fail.html`
- [ ] –ù–∞–∂–∞—Ç—å **"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å"** ‚Üí –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å **200**

### 4. üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] **Smoke Test:**
  ```bash
  # Windows
  .\smoke-test-freekassa.ps1 https://<project>.vercel.app
  
  # macOS/Linux
  bash smoke-test-freekassa.sh https://<project>.vercel.app
  ```
- [ ] **–≠–º—É–ª—è—Ç–æ—Ä Notify:**
  ```bash
  # Windows
  .\fk-notify-sim.ps1 https://<project>.vercel.app MERCHANT_ID 2490.00 LU-test-123 SECRET2
  
  # macOS/Linux
  ./fk-notify-sim.sh https://<project>.vercel.app MERCHANT_ID 2490.00 LU-test-123 SECRET2
  ```
- [ ] **–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã:**
  ```bash
  ./negative-tests.sh https://<project>.vercel.app MERCHANT_ID SECRET2
  ```

### 5. üì± –ñ–∏–≤–æ–π –ø–ª–∞—Ç—ë–∂ –Ω–∞ iPhone
- [ ] –û—Ç–∫—Ä—ã—Ç—å `/pricing` –Ω–∞ iPhone
- [ ] –í–≤–µ—Å—Ç–∏ email ‚Üí "–ö—É–ø–∏—Ç—å VIP"
- [ ] –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ FreeKassa
- [ ] –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤—É—é –æ–ø–ª–∞—Ç—É
- [ ] –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/success.html`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Vercel: `[FK][notify] OK`

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤
- [ ] **–ê–ª–µ—Ä—Ç –ø–æ —É—Å–ø–µ—à–Ω—ã–º –ø–ª–∞—Ç–µ–∂–∞–º:**
  - –°–ª–æ–≤–æ: `[FK][notify] OK`
  - –ß–∞—Å—Ç–æ—Ç–∞: < 5 –≤ —á–∞—Å
  - –î–µ–π—Å—Ç–≤–∏–µ: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram/–ø–æ—á—Ç—É

- [ ] **–ê–ª–µ—Ä—Ç –ø–æ –æ—à–∏–±–∫–∞–º:**
  - –°—Ç–∞—Ç—É—Å: 4xx/5xx –Ω–∞ `/api/fk/notify`
  - –ß–∞—Å—Ç–æ—Ç–∞: > 3 –≤ 10 –º–∏–Ω
  - –î–µ–π—Å—Ç–≤–∏–µ: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram/–ø–æ—á—Ç—É

### –õ–æ–≥–∏ Vercel
- [ ] –í–∫–ª—é—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É `FK`
- [ ] –ò—Å–∫–∞—Ç—å: `[FK][create]`, `[FK][notify]`
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å: –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞, –æ—à–∏–±–∫–∏, –¥—É–±–ª–∏–∫–∞—Ç—ã

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ß—Ç–æ –ù–ï –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å
- [ ] `SIGN` (–ø–æ–¥–ø–∏—Å–∏)
- [ ] –°–µ–∫—Ä–µ—Ç—ã (`FK_SECRET1`, `FK_SECRET2`)
- [ ] –ü–æ–ª–Ω—ã–µ email (—Ç–æ–ª—å–∫–æ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)

### CORS
- [ ] –ö–µ—à –ø—Ä–µ—Ñ–ª–∞–π—Ç–∞ –≤–∫–ª—é—á—ë–Ω (600 —Å–µ–∫)
- [ ] `ALLOWED_ORIGIN=https://lifeundo.ru`
- [ ] –î–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω –≤ allow-list

### IP-—Ñ–∏–ª—å—Ç—Ä
- [ ] –ù–∞ —Å—Ç–∞—Ä—Ç–µ –æ—Å—Ç–∞–≤–∏—Ç—å –≤—ã–∫–ª—é—á–µ–Ω–Ω—ã–º
- [ ] –î–µ—Ä–∂–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ IP FK
- [ ] –ü—Ä–æ–≤–µ—Ä—è—Ç—å `x-forwarded-for` –∑–∞–≥–æ–ª–æ–≤–∫–∏

## üöÄ –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

### –†–æ—Ç–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤
- [ ] –í –∫–∞–±–∏–Ω–µ—Ç–µ FK —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç—ã
- [ ] –û–±–Ω–æ–≤–∏—Ç—å ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Vercel
- [ ] Redeploy Production
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —ç–º—É–ª—è—Ç–æ—Ä–æ–º notify
- [ ] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–Ω–∞–ø—à–æ—Ç ENV –ª–æ–∫–∞–ª—å–Ω–æ

### –ü–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–ª—é—á–µ–π
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–¥–º–∏–Ω-—Å–∫—Ä–∏–ø—Ç: `POST /api/admin/orders`
- [ ] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: `Authorization: Bearer <ADMIN_TOKEN>`
- [ ] –¢–µ–ª–æ: `{"order_id": "LU-...", "action": "resend_license"}`

### –†–µ—Ñ–∞–Ω–¥—ã/—á–∞—Ä–¥–∂–±–µ–∫–∏
- [ ] –ù–∞–π—Ç–∏ –∑–∞–∫–∞–∑ –ø–æ `intid` –≤ –ª–æ–≥–∞—Ö
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤ –∫–∞–±–∏–Ω–µ—Ç–µ FK
- [ ] –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤ KV/DB

## üîÑ –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ï–∂–µ–¥–Ω–µ–≤–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API

### –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å IP-—Å–ø–∏—Å–∫–∞ FK
- [ ] –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –≤ KV (TTL 30 –¥–Ω–µ–π)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å –≤ –∫–∞–±–∏–Ω–µ—Ç–µ FK

### –ï–∂–µ–º–µ—Å—è—á–Ω–æ
- [ ] –†–æ—Ç–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤ FK
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —ç—Å–∫–∞–ª–∞—Ü–∏–∏

- **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞:** developer@lifeundo.ru
- **FreeKassa –ø–æ–¥–¥–µ—Ä–∂–∫–∞:** —á–µ—Ä–µ–∑ –∫–∞–±–∏–Ω–µ—Ç FK
- **Vercel –ø–æ–¥–¥–µ—Ä–∂–∫–∞:** —á–µ—Ä–µ–∑ dashboard

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –ñ–∏–≤–∞—è –æ–ø–ª–∞—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ iPhone
- [ ] –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç `[FK][notify] OK`
- [ ] –°–µ–∫—Ä–µ—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏ –∑–∞—â–∏—â–µ–Ω—ã
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Runbook –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
